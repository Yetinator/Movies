<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head th:fragment="header">
		<title>Movies</title>
		<link th:href="@{/css/styles.css}" rel="stylesheet" />
		<script th:src="@{/js/script.js}"></script>
		<script type="text/javascript" src="../webjars/jquery/3.1.1/dist/jquery.min.js"></script>
	</head>	
	
	<body>
	
		<div id="navigation" th:fragment="navigation">
			<a href="/">Home</a><br/>
			<a href="/home">User Home</a><br/>
			<a href="/signup">create account</a><br/>
			<a href="/signin">sign in</a><br/>
			<a href="/trending">Select movies</a><br/>
			<a href="/userlist">user list</a><br/>
			<a href="/signout">Sign out</a>

		</div>
		
		<div th:text="${#httpSession.getAttribute('userSessionKey')}">
		</div>
		
		<div id="smallMovieDisplay" th:fragment="smallMovieDisplay">
			<h1 th:text="${movieTemplateTitle}" >
			</h1>
			<h1 th:text="${movie.title}" >
			</h1>
			<img th:src="${imageBaseUrl} + ${movie.poster_path}" alt="Movie Picture" >
			</img>
			<p th:text="${movie.overview}" style="width: 300px;" >Movie description here
			</p>
			<script type="text/javascript">"${movieTemplateTitle}"</script>
		</div>
		
		<div id="movieInviteForm" th:fragment="movieInviteForm">
			<h1>Invite your friends!</h1>
			<form action="/invite" method="post">
				<label>Send a personalized message</label>
				<input type="text" name="message" value="Please attend my movie viewing" size="100"></input>
				<ul th:each = "user : ${usersWhoLike}">
					<input type = "checkbox" name="invited" th:text="${user.userName}" th:value="${user.uid}"></input>
				</ul>
				<input type="hidden" name = "movieid" th:value="${movie.id}"></input>
				<button type="submit">Invite</button>
			</form>
		</div>
		
		<div id="inviteDisplay" th:fragment="inviteDisplay">
			<h1 th:text="'Would you like to watch ' + ${correspondingMovies[iterStat.index].title}"></h1>
			<h3 th:text="${invite.message}"></h3>
			<h2 th:text="'You were invited by ' + ${invite.invitor.userName}"></h2>
			<h2>This is the invite list.</h2>
			<ul>
					<li th:each="aguest : ${invite.invited}" th:text="${aguest.userName}"></li>
			</ul>
			<img th:src="${imageBaseUrl} + ${correspondingMovies[iterStat.index].poster_path}" alt="Movie Picture" >
			</img>
		</div>
		
	</body>
</html>


	